I"˘í<p><img src="/assets/img/gnu/gnu-autotools-2.png" alt="GNU Autotools Ultimate Tutorial for Beginners" /></p>

<p>Although there are some other alternatives to <a href="https://gnu.org">GNU</a>‚Äôs automatic tools, <strong>GNU Autotools</strong> is still the most widely used in the world for reasons of confidence in the end results. That is, <strong>experience</strong> has led to this <strong>stability</strong>.</p>

<p>Unfortunately, there is a lot of obsolete documentation on the internet about <strong>Autotools</strong> and a lot of complaints about automated tools, so I decided to document a modern and very simplistic test that I created and I will share with you this experience that I made sure to make it as basic as possible. in order to reach understanding.</p>

<p>But still, be sure to display examples that work in larger projects, which by the way the idea is the same, just need a little more attention in the settings.</p>

<!-- QUADRADO -->
<script async="" src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<p><ins class="adsbygoogle" style="display:inline-block;width:336px;height:280px" data-ad-client="ca-pub-2838251107855362" data-ad-slot="5351066970"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></p>

<h4 id="this-article-will-be-summarized-in">This article will be summarized in:</h4>

<blockquote>
  <p>All topics have been separated with <strong>Step by Step</strong> and <strong>Lists sorted</strong> for ease of understanding.</p>
</blockquote>

<h3 id="1-introduction">1. Introduction</h3>
<h3 id="2-environment-preparation">2. Environment Preparation</h3>
<h3 id="3-using-the-automatic-tools">3. Using the automatic tools</h3>
<h3 id="4-theoretical-explanations-of-each-command-and-file">4. Theoretical explanations of each command and file</h3>
<h3 id="5-git-ready-resources-my-examples">5. Git Ready Resources (my examples)</h3>
<h3 id="6-bash-scripts-make-it-easy-to-note-the-steps">6. Bash scripts (make it easy to note the steps)</h3>
<h3 id="7-summary-mini-mind-map">7. Summary (Mini Mind Map)</h3>
<h3 id="8-references">8. References</h3>

<hr />

<h2 id="introduction">Introduction</h2>

<p><a href="https://www.gnu.org/software/autoconf/">GNU Autotools</a> , also known as the <a href="https://www.gnu.org/software/automake/">GNU Build System</a> , is a set of programming tools designed to help make source code packages portable to many Unix systems.</p>

<p>It can be difficult to make a software program portable: the <a href="https://en.terminalroot.com.br/examples-of-functions-fread-fwrite-remove-and-others-in-c/">C</a> compiler differs from system to system;Some library functions are missing on some systems;Header files may have different names.One way to deal with this is to write conditional code, with code blocks selected using preprocessor directives (<code class="highlighter-rouge">#ifdef</code>);But due to the wide variety of building environments, this approach quickly becomes unmanageable. <a href="https://www.gnu.org/software/libtool/">Autotools</a> is designed to solve this problem more easily.</p>

<!-- MINI AN√öNCIO -->
<script async="" src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<!-- Games Root -->
<p><ins class="adsbygoogle" style="display:inline-block;width:730px;height:95px" data-ad-client="ca-pub-2838251107855362" data-ad-slot="5351066970"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></p>

<p><strong>Autotools</strong> is part of the GNU tool chain and is widely used in many open source and open source packages. Its component tools are licensed by free software under the GNU General Public License, with special license exceptions allowing their use with proprietary software.</p>

<p>The GNU Build System makes it possible to create many programs using a two-step process: configure followed by make.</p>

<p>Autotools consists of the <a href="https://www.gnu.org/software/autoconf/">GNU Autoconf</a> , <a href="https://www.gnu.org/software/automake/">Automake</a>, and <a href="https://www.gnu.org/software/libtool/">Libtool</a> utility programs.Other related tools often used alongside it include the GNU make program, <a href="https://www.gnu.org/software/gettext/">GNU gettext</a> , <a href="https://www.freedesktop.org/wiki/Software/pkg-config/">pkg-config</a>, and the <a href="https://gcc.gnu.org/">GNU Compiler Collection</a> , also called <strong>GCC/G ++</strong>.</p>

<hr />

<h2 id="part-1-setting-up-the-test-files">Part 1: Setting Up the Test Files</h2>

<ul>
  <li><strong>1</strong> ‚Üí Create the directories for the tests:</li>
</ul>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">mkdir </span>testes <span class="o">&amp;&amp;</span> <span class="nb">cd </span>testes
<span class="nb">mkdir </span>doc examples man scripts src</code></pre></figure>

<ul>
  <li><strong>2</strong> ‚Üí Create the test files</li>
</ul>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">touch </span>doc/README.md examples/my-example-teste.dat man/teste.1 scripts/script-teste.sh src/teste.c</code></pre></figure>

<ul>
  <li><strong>3</strong> ‚Üí Popular the files</li>
</ul>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c"># Content for doc/</span>
<span class="nb">echo</span> <span class="s2">"Docs for teste"</span> <span class="o">&gt;&gt;</span> doc/README.md

<span class="c"># Conte√∫do para o arquivo em examples/</span>
<span class="nb">echo</span> <span class="nt">-e</span> <span class="s1">'#!/bin/bash\necho "Teste in Bash"\nexit 0'</span> <span class="o">&gt;&gt;</span> examples/my-example-teste.dat

<span class="c"># Content for man/</span>
<span class="nb">echo</span> <span class="nt">-e</span> <span class="s1">'.\" DO NOT MODIFY THIS FILE!  It was generated by help2man 1.47.8.
.TH teste "1" "October 2019" "teste 1.1" "User Commands"
.SH NAME
teste \- Only teste for Autotools.'</span> <span class="o">&gt;</span> man/teste.1

<span class="c"># Content for scripts/</span>
<span class="nb">echo</span> <span class="nt">-e</span> <span class="s1">'#!/bin/sh\nprintf "Only a teste\\n" "%s"\nexit 0'</span> <span class="o">&gt;</span> scripts/script-teste.sh

<span class="c"># Content for src/</span>
<span class="nb">echo</span> <span class="nt">-e</span> <span class="s1">'#include &lt;stdio.h&gt;

int main(){
	printf("Only one test for Autotools\\n");
	return 0;
}'</span> <span class="o">&gt;</span> src/teste.c</code></pre></figure>

<ul>
  <li><strong>4</strong> ‚Üí Final result of the archives:</li>
</ul>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">testes/
‚îú‚îÄ‚îÄ doc
‚îÇ¬†¬† ‚îî‚îÄ‚îÄ README.md
‚îú‚îÄ‚îÄ examples
‚îÇ¬†¬† ‚îî‚îÄ‚îÄ my-example-teste.dat
‚îú‚îÄ‚îÄ man
‚îÇ¬†¬† ‚îî‚îÄ‚îÄ teste.1
‚îú‚îÄ‚îÄ scripts
‚îÇ¬†¬† ‚îî‚îÄ‚îÄ script-teste.sh
‚îî‚îÄ‚îÄ src
    ‚îî‚îÄ‚îÄ teste.c
5 directories, 5 files</code></pre></figure>

<ul>
  <li><strong>5</strong> ‚Üí Optional: directory hash:</li>
</ul>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">ls</span> ../testes/ | <span class="nb">md5sum
</span>ac0bacadc6861ab22a44af572b255ff1  -</code></pre></figure>

<!-- RETANGULO LARGO 2 -->
<script async="" src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<p><ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-2838251107855362" data-ad-slot="8549252987"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></p>

<hr />

<h2 id="part-2-using-gnu-autotools-tools">Part 2: Using GNU Autotools Tools</h2>

<ul>
  <li><strong>1</strong> ‚Üí Generate the <code class="highlighter-rouge">configure.ac</code> file, run:</li>
</ul>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">autoscan</code></pre></figure>

<blockquote>
  <p>The files <code class="highlighter-rouge">autoscan-2.69.log</code> and <code class="highlighter-rouge">configure.scan</code> were created.Where the content of <em>autoscan-2.69.log</em> is empty and the content of <em>configure.ac</em> is:</p>
</blockquote>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c">#                                               -*- Autoconf -*-</span>
<span class="c"># Process this file with autoconf to produce a configure script.</span>

AC_PREREQ<span class="o">([</span>2.69]<span class="o">)</span>
AC_INIT<span class="o">([</span>FULL-PACKAGE-NAME], <span class="o">[</span>VERSION], <span class="o">[</span>BUG-REPORT-ADDRESS]<span class="o">)</span>
AC_CONFIG_SRCDIR<span class="o">([</span>src/teste.c]<span class="o">)</span>
AC_CONFIG_HEADERS<span class="o">([</span>config.h]<span class="o">)</span>

<span class="c"># Checks for programs.</span>
AC_PROG_CC

<span class="c"># Checks for libraries.</span>

<span class="c"># Checks for header files.</span>

<span class="c"># Checks for typedefs, structures, and compiler characteristics.</span>

<span class="c"># Checks for library functions.</span>

AC_OUTPUT</code></pre></figure>

<ul>
  <li><strong>2</strong> ‚Üí Rename the <code class="highlighter-rouge">configure.scan</code> file to <code class="highlighter-rouge">configure.ac</code> :</li>
</ul>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">mv </span>configure.scan configure.ac</code></pre></figure>

<ul>
  <li><strong>3</strong> ‚Üí Change the line of the <code class="highlighter-rouge">configure.ac</code> file that has the information: <strong>AC_INIT (FULL-PACKAGE-NAME, VERSION, BUG-REPORT-ADDRESS)</strong> to your project names, eg <strong>AC_INIT (test, 1.0, teste@terminalroot.com .br)</strong> .If you wish, use <a href="https://en.terminalroot.com.br/30-examples-of-the-sed-command-with-regex/">Sed</a> for this, like this:</li>
</ul>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">sed</span> <span class="nt">-i</span> <span class="s1">'s/FULL-PACKAGE-NAME\],/teste],/g'</span> configure.ac
<span class="nb">sed</span> <span class="nt">-i</span> <span class="s1">'s/VERSION\],/1.0],/g'</span> configure.ac
<span class="nb">sed</span> <span class="nt">-i</span> <span class="s1">'s/BUG-REPORT-ADDRESS\]/teste@terminalroot.com.br]/g'</span> configure.ac</code></pre></figure>

<blockquote>
  <p>Or use a preferred text editor, for example: Vim .
In the end my file looked like this:</p>
</blockquote>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c">#                                               -*- Autoconf -*-</span>
<span class="c"># Process this file with autoconf to produce a configure script.</span>

AC_PREREQ<span class="o">([</span>2.69]<span class="o">)</span>
AC_INIT<span class="o">([</span>teste], <span class="o">[</span>1.0], <span class="o">[</span>teste@terminalroot.com.br]<span class="o">)</span>
AC_CONFIG_SRCDIR<span class="o">([</span>src/teste.c]<span class="o">)</span>
AC_CONFIG_HEADERS<span class="o">([</span>config.h]<span class="o">)</span>

<span class="c"># Checks for programs.</span>
AC_PROG_CC

<span class="c"># Checks for libraries.</span>

<span class="c"># Checks for header files.</span>

<span class="c"># Checks for typedefs, structures, and compiler characteristics.</span>

<span class="c"># Checks for library functions.</span>

AC_OUTPUT</code></pre></figure>

<ul>
  <li><strong>4</strong> ‚Üí Generating an initial <code class="highlighter-rouge">configure</code> script:</li>
</ul>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">autoconf</code></pre></figure>

<blockquote>
  <p>1 new directory and 1 new file were created: <code class="highlighter-rouge">autom4te.cache/</code> and <code class="highlighter-rouge">configure</code> .Their contents are extensive, <code class="highlighter-rouge">configure</code> for example has <strong>3549 lines</strong> .</p>
</blockquote>

<ul>
  <li>Creating the <code class="highlighter-rouge">Makefile.am</code> File:</li>
</ul>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">vim Makefile.am</code></pre></figure>

<!-- RETANGULO LARGO -->
<script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<!-- Informat -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-2838251107855362" data-ad-slot="2327980059" data-ad-format="auto" data-full-width-responsive="true"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></p>

<p>And insert this content in:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">AUTOMAKE_OPTIONS <span class="o">=</span> foreign
SUBDIRS <span class="o">=</span> src doc examples man scripts</code></pre></figure>

<ul>
  <li><strong>6</strong> ‚Üí Creating the <code class="highlighter-rouge">Makefile.am</code> file only this time inside the <code class="highlighter-rouge">src/</code> directory:</li>
</ul>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">vim src/Makefile.am</code></pre></figure>

<p>And insert this content in:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c"># what flags you want to pass to the C compiler &amp; linker</span>
CFLAGS <span class="o">=</span> <span class="nt">--pedantic</span> <span class="nt">-Wall</span> <span class="nt">-std</span><span class="o">=</span>c99 <span class="nt">-O2</span>
<span class="c"># LDFLAGS =</span>
<span class="c"># this lists the binaries to produce, the (non-PHONY, binary) targets in</span>
<span class="c"># the previous manual Makefile</span>
bin_PROGRAMS <span class="o">=</span> teste
teste_SOURCES <span class="o">=</span> teste.c</code></pre></figure>

<ul>
  <li><strong>7</strong> ‚Üí Creating the <code class="highlighter-rouge">Makefile.am</code> file only this time inside the <code class="highlighter-rouge">man/</code> directory:</li>
</ul>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">vim man/Makefile.am</code></pre></figure>

<p>And insert this content in:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">man_MANS <span class="o">=</span> teste.1</code></pre></figure>

<ul>
  <li><strong>8</strong> ‚Üí Creating the <code class="highlighter-rouge">Makefile.am</code> file only this time inside the <code class="highlighter-rouge">scripts/</code> directory:</li>
</ul>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">vim scripts/Makefile.am</code></pre></figure>

<p>And insert this content in:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">bin_SCRIPTS <span class="o">=</span> script-teste.sh</code></pre></figure>

<ul>
  <li><strong>9</strong> ‚Üí Creating the <code class="highlighter-rouge">Makefile.am</code> file only this time inside the <code class="highlighter-rouge">doc/</code> directory:</li>
</ul>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">vim doc/Makefile.am</code></pre></figure>

<!-- QUADRADO -->
<script async="" src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<p><ins class="adsbygoogle" style="display:inline-block;width:336px;height:280px" data-ad-client="ca-pub-2838251107855362" data-ad-slot="5351066970"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></p>

<p>And insert this content in:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">docdir <span class="o">=</span> <span class="si">$(</span>datadir<span class="si">)</span>/doc/@PACKAGE@
doc_DATA <span class="o">=</span> README.md</code></pre></figure>

<ul>
  <li><strong>10</strong> ‚Üí Creating one more <code class="highlighter-rouge">Makefile.am</code> file only this time inside the <code class="highlighter-rouge">examples/</code> directory:</li>
</ul>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">vim examples/Makefile.am</code></pre></figure>

<p>And insert this content in:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">exampledir <span class="o">=</span> <span class="si">$(</span>datarootdir<span class="si">)</span>/doc/@PACKAGE@
example_DATA <span class="o">=</span> my-example-teste.dat</code></pre></figure>

<ul>
  <li><strong>11</strong> ‚Üí Integrating the <code class="highlighter-rouge">autoconf</code> part with the automake.
    <blockquote>
      <p>Open the <code class="highlighter-rouge">vim configure.ac</code> file</p>
    </blockquote>
  </li>
</ul>

<p>And insert the content <strong>AM_INIT_AUTOMAKE(teste, 1.0)</strong> , right after <strong>AC_INIT([teste], [1.0], [teste@terminalroot.com.br])</strong> :</p>
<blockquote>
  <p>If you want it to be easier, just use this command below ( Sed ):</p>
</blockquote>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">sed</span> <span class="nt">-i</span> <span class="s1">'/AC_INIT/{p;s/.*/AM_INIT_AUTOMAKE(teste, 1.0)/;}'</span> configure.ac</code></pre></figure>

<ul>
  <li><strong>12</strong> ‚Üí  Let autoconf generate a configure script whose output will be Makefiles for all directories mentioned:
    <blockquote>
      <p>Changing the line that contains: <strong>AC_OUTPUT</strong> with Sed (if you want to use a text editor and do it manually):</p>
    </blockquote>
  </li>
</ul>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">sed</span> <span class="nt">-i</span> <span class="s1">'s@AC_OUTPUT@AC_OUTPUT(Makefile src/Makefile doc/Makefile examples/Makefile man/Makefile scripts/Makefile)@'</span> configure.ac</code></pre></figure>

<ul>
  <li><strong>13</strong> ‚Üí Making the tools produce the <code class="highlighter-rouge">configure</code> script and Makefile templates:</li>
</ul>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">aclocal</code></pre></figure>

<blockquote>
  <p><code class="highlighter-rouge">aclocal.m4</code> file was generated in the project root directory named: <code class="highlighter-rouge">aclocal.m4</code></p>
</blockquote>

<ul>
  <li><strong>14</strong> ‚Üí Producing <code class="highlighter-rouge">Makefile.in</code> with the argument <code class="highlighter-rouge">--add-missing</code> :</li>
</ul>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">automake <span class="nt">--add-missing</span></code></pre></figure>

<!-- MINI AN√öNCIO -->
<script async="" src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<!-- Games Root -->
<p><ins class="adsbygoogle" style="display:inline-block;width:730px;height:95px" data-ad-client="ca-pub-2838251107855362" data-ad-slot="5351066970"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></p>

<p>The output will look something similar or the same (if you used the files in this tutorial) to:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">configure.ac:6: warning: AM_INIT_AUTOMAKE: two- and three-arguments forms are deprecated.  For more info, see:
configure.ac:6: https://www.gnu.org/software/automake/manual/automake.html#Modernize-AM_005fINIT_005fAUTOMAKE-invocation
configure.ac:11: installing <span class="s1">'./compile'</span>
configure.ac:6: installing <span class="s1">'./install-sh'</span>
configure.ac:6: installing <span class="s1">'./missing'</span>
configure.ac:8: error: required file <span class="s1">'config.h.in'</span> not found
src/Makefile.am: installing <span class="s1">'./depcomp'</span>
src/Makefile.am:2: warning: <span class="s1">'CFLAGS'</span> is a user variable, you should not override it<span class="p">;</span>
src/Makefile.am:2: use <span class="s1">'AM_CFLAGS'</span> instead
src/Makefile.am:3: warning: <span class="s1">'LDFLAGS'</span> is a user variable, you should not override it<span class="p">;</span>
src/Makefile.am:3: use <span class="s1">'AM_LDFLAGS'</span> instead</code></pre></figure>

<p>Note the line: <strong>configure.ac:8: error: required file ‚Äòconfig.h.in‚Äô not found</strong> , if this also appears to you, run:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">autoreconf <span class="nt">-fi</span></code></pre></figure>

<ul>
  <li>And finally we generate the final <code class="highlighter-rouge">configure</code> script:</li>
</ul>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">autoconf</code></pre></figure>

<p>If you want to make sure everything is fine, run <code class="highlighter-rouge">./configure</code> , <code class="highlighter-rouge">make</code> and test program execution: <code class="highlighter-rouge">cd src/ &amp;amp;&amp;amp; ./teste</code> , the output will be: <strong>Just a test for Autotools</strong> .And if you want to install on the system, run:</p>
<blockquote>
  <p>Since you have <code class="highlighter-rouge">sudo</code> installed and are part of the group, otherwise <code class="highlighter-rouge">make install</code> only work with <code class="highlighter-rouge">root</code> .</p>
</blockquote>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">./configure
make
<span class="nb">sudo </span>make <span class="nb">install</span></code></pre></figure>

<p>A instala√ß√£o vai criar alguns diret√≥rio e fazer as seguintes c√≥pias dos arquivos para os caminhos:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">/bin/mkdir <span class="nt">-p</span> <span class="s1">'/usr/local/bin'</span>
/usr/bin/install <span class="nt">-c</span> teste <span class="s1">'/usr/local/bin'</span>

/bin/mkdir <span class="nt">-p</span> <span class="s1">'/usr/local/share/doc/teste'</span>
/usr/bin/install <span class="nt">-c</span> <span class="nt">-m</span> 644 README.md <span class="s1">'/usr/local/share/doc/teste

/bin/mkdir -p '</span>/usr/local/share/doc/teste<span class="s1">'
/usr/bin/install -c -m 644 my-example-teste.dat '</span>/usr/local/share/doc/teste<span class="s1">'

/bin/mkdir -p '</span>/usr/local/share/man/man1<span class="s1">'
/usr/bin/install -c -m 644 teste.1 '</span>/usr/local/share/man/man1<span class="s1">'

/bin/mkdir -p '</span>/usr/local/bin<span class="s1">'
/usr/bin/install -c script-teste.sh '</span>/usr/local/bin<span class="s1">'</span></code></pre></figure>

<!-- MINI AN√öNCIO -->
<script async="" src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<!-- Games Root -->
<p><ins class="adsbygoogle" style="display:inline-block;width:730px;height:95px" data-ad-client="ca-pub-2838251107855362" data-ad-slot="5351066970"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></p>

<ul>
  <li>Running the command: <code class="highlighter-rouge">teste</code> (regardless of the directory you are in) will get program execution output: <strong>Only one test for Autotools</strong> ;</li>
  <li><code class="highlighter-rouge">script-teste.sh</code> the command: <code class="highlighter-rouge">script-teste.sh</code> (regardless of the directory you are in) will get the output of the program execution: <strong>Only a test</strong> ;</li>
  <li>If you run the command: <code class="highlighter-rouge">info teste</code> or <code class="highlighter-rouge">man teste</code> (regardless of the directory you are in) you will get the manual;</li>
  <li>If you want to see the documentation, run: <code class="highlighter-rouge">cat /usr/local/share/doc/teste/README.md</code> ;</li>
  <li>If you want to see the examples, run: <code class="highlighter-rouge">cat /usr/local/share/doc/teste/my-example-teste.dat</code> .</li>
</ul>

<p>To uninstall you will need to be in the <code class="highlighter-rouge">testes/</code> directory and run the command:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">sudo </span>make uninstall</code></pre></figure>

<p>Absolutely EVERYTHING will be uninstalled, the output will be similar/equal:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">marcos@gentoo ~/testes <span class="nv">$ </span><span class="nb">sudo </span>make uninstall
Senha:
Making uninstall <span class="k">in </span>src
make[1]: Entering directory <span class="s1">'/home/marcos/testes/src'</span>
 <span class="o">(</span> <span class="nb">cd</span> <span class="s1">'/usr/local/bin'</span> <span class="o">&amp;&amp;</span> <span class="nb">rm</span> <span class="nt">-f</span> teste <span class="o">)</span>
make[1]: Leaving directory <span class="s1">'/home/marcos/testes/src'</span>
Making uninstall <span class="k">in </span>doc
make[1]: Entering directory <span class="s1">'/home/marcos/testes/doc'</span>
 <span class="o">(</span> <span class="nb">cd</span> <span class="s1">'/usr/local/share/doc/teste'</span> <span class="o">&amp;&amp;</span> <span class="nb">rm</span> <span class="nt">-f</span> README.md <span class="o">)</span>
make[1]: Leaving directory <span class="s1">'/home/marcos/testes/doc'</span>
Making uninstall <span class="k">in </span>examples
make[1]: Entering directory <span class="s1">'/home/marcos/testes/examples'</span>
 <span class="o">(</span> <span class="nb">cd</span> <span class="s1">'/usr/local/share/doc/teste'</span> <span class="o">&amp;&amp;</span> <span class="nb">rm</span> <span class="nt">-f</span> my-example-teste.dat <span class="o">)</span>
make[1]: Leaving directory <span class="s1">'/home/marcos/testes/examples'</span>
Making uninstall <span class="k">in </span>man
make[1]: Entering directory <span class="s1">'/home/marcos/testes/man'</span>
 <span class="o">(</span> <span class="nb">cd</span> <span class="s1">'/usr/local/share/man/man1'</span> <span class="o">&amp;&amp;</span> <span class="nb">rm</span> <span class="nt">-f</span> teste.1 <span class="o">)</span>
make[1]: Leaving directory <span class="s1">'/home/marcos/testes/man'</span>
Making uninstall <span class="k">in </span>scripts
make[1]: Entering directory <span class="s1">'/home/marcos/testes/scripts'</span>
 <span class="o">(</span> <span class="nb">cd</span> <span class="s1">'/usr/local/bin'</span> <span class="o">&amp;&amp;</span> <span class="nb">rm</span> <span class="nt">-f</span> script-teste.sh <span class="o">)</span>
make[1]: Leaving directory <span class="s1">'/home/marcos/testes/scripts'</span>
make[1]: Entering directory <span class="s1">'/home/marcos/testes'</span>
make[1]: Nothing to be <span class="k">done for</span> <span class="s1">'uninstall-am'</span><span class="nb">.</span>
make[1]: Leaving directory <span class="s1">'/home/marcos/testes'</span>
marcos@gentoo ~/testes <span class="err">$</span></code></pre></figure>

<h2 id="part-3-preparing-files-or-generating-everything-via-shell-script">Part 3: Preparing Files or Generating Everything via Shell Script</h2>

<p>If you want to see everything we‚Äôve done here, use pre-made files or run a simple Bash script:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">git clone https://github.com/terroo/gnu-autotools
<span class="nb">cd </span>gnu-autotools/</code></pre></figure>

<p>And use the pre-created environment files: <code class="highlighter-rouge">gnu-autotools/testes/</code> or simply run the script that creates the files from scratch: <code class="highlighter-rouge">./gnu-autotools.sh</code></p>

<p>Or generate everything including <strong>Autotools</strong> commands via script with the file: <code class="highlighter-rouge">./gnu-autotools-full.sh</code></p>

<hr />

<h2 id="part-4-explaining-autotools-files-and-commands">Part 4: Explaining Autotools Files and Commands</h2>

<!-- MINI AN√öNCIO -->
<script async="" src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<!-- Games Root -->
<p><ins class="adsbygoogle" style="display:inline-block;width:730px;height:95px" data-ad-client="ca-pub-2838251107855362" data-ad-slot="5351066970"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></p>

<p>In summary GNU Autotools :</p>
<ul>
  <li>Checks the availability of required libraries;</li>
  <li>Possibly sets some things (like some paths in scripts or documentation) at compile time;</li>
  <li>Install everything in its place;</li>
  <li>All of this in a standardized way and dealing with all possible errors that may exist in the construction and installation of software;</li>
  <li>The <code class="highlighter-rouge">autoscan</code> command attempts to produce a correct <code class="highlighter-rouge">configure.ac</code> file by performing simple parses on package files;</li>
  <li>The <code class="highlighter-rouge">autoconf</code> command produces two files: <code class="highlighter-rouge">autom4te.cache</code> and <code class="highlighter-rouge">configure</code>;</li>
  <li>The <code class="highlighter-rouge">autom4te.cache</code> directory is a directory used to speed up the work of tools, and can be removed when the package is released;</li>
  <li>The <code class="highlighter-rouge">configure</code> file is the shell script that is called by end users.At this point, what the configure file does is just dependency checking as suggested by <em>autoscan</em> , so nothing too conclusive yet;</li>
</ul>

<!-- QUADRADO -->
<script async="" src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<p><ins class="adsbygoogle" style="display:inline-block;width:336px;height:280px" data-ad-client="ca-pub-2838251107855362" data-ad-slot="5351066970"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></p>

<ul>
  <li>Once we have the system checking part, we move on to compiling and installing.This is done by the cooperation between <code class="highlighter-rouge">automake</code> and <code class="highlighter-rouge">autoconf</code> .<code class="highlighter-rouge">automake</code> generates some ‚Äútemplates‚Äù that scripts generated by <code class="highlighter-rouge">autoconf</code> translate into Makefiles.An initial makefile file is required at the root of the package: <strong>./Makefile.am</strong>;</li>
  <li>The <strong>AUTOMAKE_OPTIONS = foreign</strong> sets the mode <code class="highlighter-rouge">automake</code> will take.The ‚Äúforeign‚Äù mode means non-GNU, and is commonly used;</li>
  <li>The second line shows the list of sub directories where the files to be worked are located.The first has things to compile, while the rest just needs to be installed, but we don‚Äôt care about this file.We will now prepare the <code class="highlighter-rouge">Makefile.am</code> file for each of these directories.<code class="highlighter-rouge">automake</code> will pass one of them home to produce the corresponding <code class="highlighter-rouge">Makefile.in</code> file.These <code class="highlighter-rouge">*.in</code> files will be used by <code class="highlighter-rouge">autoconf</code> scripts to produce the final <code class="highlighter-rouge">Makefile</code> files.+ Usually in the <code class="highlighter-rouge">src/Makefile.am</code> file we define all files that will be created and compiled.In general, uppercase suffixes like ‚Äú_PROGRAMS‚Äù are called <strong>primary</strong> and partially tell you what to do in your argument;prefixes, in lower case letters (do not have a predefined name) tell the directory where it will be installed.To inform several files, it is used more or less like this:</li>
</ul>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c"># what flags you want to pass to the C compiler &amp; linker</span>
CFLAGS <span class="o">=</span> <span class="nt">--pedantic</span> <span class="nt">-Wall</span> <span class="nt">-std</span><span class="o">=</span>c99 <span class="nt">-O2</span>
LDFLAGS <span class="o">=</span>
<span class="c"># this lists the binaries to produce, the (non-PHONY, binary) targets in</span>
<span class="c"># the previous manual Makefile</span>
bin_PROGRAMS <span class="o">=</span> targetbinary1 targetbinary2 <span class="o">[</span>...] targetbinaryN
targetbinary1_SOURCES <span class="o">=</span> targetbinary1.c myheader.h <span class="o">[</span>...]
targetbinary2_SOURCES <span class="o">=</span> targetbinary2.c
<span class="nb">.</span>
<span class="nb">.</span>
targetbinaryN_SOURCES <span class="o">=</span> targetbinaryN.c</code></pre></figure>

<ul>
  <li>Files in <code class="highlighter-rouge">scripts/</code> usually have the Shell Script that will call the executable, as well as parameter autocomplete (compgen) templates. We use a sample content, but the same would be true (example of the Firefox script):</li>
</ul>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c">#!/bin/sh</span>
<span class="nb">unset </span>LD_PRELOAD
<span class="nv">LD_LIBRARY_PATH</span><span class="o">=</span><span class="s2">"/usr/lib64/apulse:/opt/firefox/"</span> <span class="se">\</span>
<span class="nv">GTK_PATH</span><span class="o">=</span>/usr/lib64/gtk-3.0/ <span class="se">\</span>
<span class="nb">exec</span> /opt/firefox/firefox <span class="s2">"</span><span class="nv">$@</span><span class="s2">"</span></code></pre></figure>

<ul>
  <li>That is, it will call the executable that was compiled and installed in <code class="highlighter-rouge">/opt</code> in its proper directory;</li>
  <li>The <code class="highlighter-rouge">aclocal</code> command creates the tools that generate each script generates the <code class="highlighter-rouge">aclocal.m4</code> file that contains <strong>macros</strong> for <code class="highlighter-rouge">automake</code> things;</li>
  <li>The <code class="highlighter-rouge">automake</code> command reads <code class="highlighter-rouge">configure.ac</code> and <code class="highlighter-rouge">Makefile.a</code> m, interprets them, and for each <code class="highlighter-rouge">Makefile.am</code> produces a <code class="highlighter-rouge">Makefile.in</code> .The <code class="highlighter-rouge">--add-missing</code> argument tells <code class="highlighter-rouge">automake</code> to provide default scripts for any reported errors, so it can be omitted in future executions;</li>
  <li>The <code class="highlighter-rouge">autoreconf</code> command (used to rectify the lack of <code class="highlighter-rouge">config.h.in</code> ) compiles all relevant tools in the correct order and installs missing files.The parameters <code class="highlighter-rouge">-f</code> (assume everything is obsolete and force reconfiguration) and <code class="highlighter-rouge">-i</code> (make a copy of auxiliary files present in the system for your project, call <code class="highlighter-rouge">autoheader</code> ).We could still join the <code class="highlighter-rouge">-v</code> parameter by getting <code class="highlighter-rouge">-vfi</code> to see the details of the procedures.</li>
</ul>

<hr />

<h2 id="summing-up">Summing up</h2>

<p><code class="highlighter-rouge">autotools</code> ‚Üí <code class="highlighter-rouge">autoscan</code> (configure.scan) ‚Üí <code class="highlighter-rouge">configure.ac</code> ‚Üí <code class="highlighter-rouge">autoconf</code> (autom4te.cache and initial configure) ‚Üí <code class="highlighter-rouge">Makefile.am</code> ( <code class="highlighter-rouge">*</code> ) ‚Üí <code class="highlighter-rouge">aclocal</code> (aclocal.m4) ‚Üí <code class="highlighter-rouge">automake</code> (Makefile.in) ‚Üí <code class="highlighter-rouge">autoreconf</code> ( <code class="highlighter-rouge">config.h.in/header</code> ) ‚Üí autoconf ( <code class="highlighter-rouge">./configure</code> ) ‚Üí <code class="highlighter-rouge">Makefile</code> (make &amp;&amp; make install)</p>

<p><img src="/assets/img/gnu/gnu-autotools-1.png" alt="Autotools" /></p>

<hr />

<!-- QUADRADO -->
<script async="" src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<p><ins class="adsbygoogle" style="display:inline-block;width:336px;height:280px" data-ad-client="ca-pub-2838251107855362" data-ad-slot="5351066970"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></p>

<h2 id="references">References</h2>
<ul>
  <li><a href="https://www.gnu.org/software/autoconf/">https://www.gnu.org/software/autoconf/</a></li>
  <li><a href="https://www.gnu.org/software/automake/">https://www.gnu.org/software/automake/</a></li>
  <li><a href="https://www.gnu.org/software/libtool/">https://www.gnu.org/software/libtool/</a></li>
  <li><a href="https://www.gnu.org/software/make/">https://www.gnu.org/software/make/</a></li>
  <li><a href="https://www.gnu.org/software/gettext/">https://www.gnu.org/software/gettext/</a></li>
  <li><a href="https://en.wikipedia.org/wiki/GNU_Autotools">https://en.wikipedia.org/wiki/GNU_Autotools</a></li>
  <li><a href="https://klebermota.eti.br/2010/10/13/tutorial-para-criar-a-estrutura-de-arquivos-do-autoconf-automake-para-seu-projeto/">https://klebermota.eti.br/2010/10/13/tutorial-para-criar-a-estrutura-de-arquivos-do-autoconf-automake-para-seu-projeto/</a></li>
  <li><a href="https://developer.gnome.org/anjuta-build-tutorial/stable/create-autotools.html.en">https://developer.gnome.org/anjuta-build-tutorial/stable/create-autotools.html.en</a></li>
  <li><a href="https://dwheeler.com/autotools/">https://dwheeler.com/autotools/</a></li>
</ul>
:ET